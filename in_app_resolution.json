{
  "title": "The schema of the open event",
  "type": "object",
  "properties": {
    "id": {
      "type": "string",
      "description": "A unique UUID assocaited with each event used for deduplication."
    },
    "offset": {
      "type": "string",
      "description": "This field is only used when directly consuming from the connect api to indicate the offset for resuming.  Connect integrations will always have this value set to 0."
    },
    "occurred": {
      "type": "string",
      "description": "The time the event occured as an iso8601 UTC timestamp."
    },
    "processed": {
      "type": "string",
      "description": "The time the event was processed as an iso8601 UTC timestamp."
    },
    "device": {
      "type": "object",
      "description": "An object describing attributes of the device.  Only one channel association will be given.",
      "properties": {
        "ios_channel": {
          "type": "string",
          "description": "The IOS channel the device is associated with."
        },
        "android_channel": {
            "type": "string",
            "description": "The Android channel the device is assocaited with."
        },
        "amazon_channel": {
            "type": "string",
            "description": "The Amazon channel the device is assocaited with."
        },
        "named_user_id": {
            "type": "string",
            "description": "The named user assocaited with the device."
        },
        "attributes": {
          "type": "object",
          "properties": {
            "locale_variant": {
              "type": "string"
            },
            "app_version": {
              "type": "string",
              "description": "Indicates the version of the application"
            },
            "device_model": {
              "type": "string",
              "description": "Indicates the device model"
            },
            "connection_type": {
              "type": "string",
              "description": "Indicates if the connection is WIFI or 3g etc.."
            },
            "app_package_name": {
              "type": "string",
              "description": "Indicates the applications package name"
            },
            "iana_timezone": {
              "type": "string",
              "description": "Indicates the IANA timezone"
            },
            "push_opt_in": {
              "type": "string",
              "description": "Indicates if the device is opted in for push"
            },
            "locale_country_code": {
              "type": "string",
              "description": "Indicates the countries locale country code"
            },
            "device_os": {
              "type": "string",
              "description": "Indicates the devices operating system of IOS or android and possibly version"
            },
            "locale_timezone": {
              "type": "string",
              "description": "Indicates the timezone for the device"
            },
            "carrier": {
              "type": "string",
              "description": "Indicates the carrier on which the device is active"
            },
            "locale_language_code": {
              "type": "string",
              "description": "Indicates the locale language code for the device"
            },
            "location_enabled": {
              "type": "string",
              "description": "Indicates if the device has location tracking enabled"
            },
            "background_push_enabled": {
              "type": "string",
              "description": "Indicates if the device has background push enabled"
            },
            "ua_sdk_version": {
              "type": "string",
              "description": "Indicates what version of the ua sdk is in use"
            },
            "location_permission": {
              "type": "string",
              "description": "Indicates if the device has permission to use the location information for enhancing user experience"
            }
          }
        }
      }
    },
    "body": {
      "type": "object",
      "description": "MESSAGE_CLICK type events indicate that a message was clicked but no button pressed. 'USER_DISMISSED' indicates that a user clicked an x or swiped to dismiss the notification. 'BUTTON_CLICK' indicates that a user pressed a given button"
      "properties": {
        "session_id": {
          "type": "string"
        },
        "push_id": {
          "type": "string",
          "description": "A Push ID for the push which delivered the In-App Message instruction to the device."
        },
        "group_id": {
          "type": "string",
          "description": "The push's group_id if it is a part of an automation event pipeline"
        },
        "time_sent": {
          "type": "string",
          "description": "An ISO 8601 datetime indicating when the payload defining the In-App Message was sent to the device."
        },
        "type": {
          "type": "string",
          "enum": ["BUTTON_CLICK", "MESSAGE_CLICK", "TIMED_OUT", "USER_DISMISSED"]
        },
        "button_id": {
          "type": "string",
          "description": "A unique identifier for the button.  Only present if type is 'BUTTON_CLICK'"
        },
        "button_group": {
          "type": "string",
          "description": "A category associated with the message.  Only present if type is 'BUTTON_CLICK'"
        },
        "button_description": {
          "type": "string",
          "description": "The title of the button on which the user clicked. Only present if type is 'BUTTON_CLICK'"
        },
        "triggering_push": {
          "type": "object",
          "description": "If the open was a direct open caused by a push this is the meta data describing that push",
          "properties": {
            "push_id": {
              "type": "string",
              "description": "The push id of the triggering push"
            },
            "time": {
              "type": "string",
              "description": "iso8601 timestamp indicating when the triggering push was recieved"
            },
            "group_id": {
              "type": "string",
              "description": "The push's group_id if it is a part of an automation event pipeline"
            }
          },
          "required": ["push_id"]
        }
      }
    },
    "type": {
      "type": "string",
      "description": "The type of the event"
    }
  },
  "required": [
    "id",
    "offset",
    "occurred",
    "processed",
    "device",
    "body",
    "type"
  ]
}
